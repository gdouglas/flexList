<html>

<head>
    <script src="http://chancejs.com/chance.min.js"></script>
    <script src="../scripts/vue.js"></script>
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN"
        crossorigin="anonymous">
</head>

<body>
    <div id="app" class="container">
        <header>
            <h1>Flex List</h1>
            <h2>{{currentRole}} View</h2>
        </header>
        <label class="full-width">
            Search
            <i class="fa fa-search"></i>
            <input>
        </label>
        <button @click="advancedSearch = !advancedSearch">Advanced Search</button>
        <transition name="fade">
            <div v-if="advancedSearch" class="advanced-search">
                <label class="full-width">
                    Ethics board approval
                    <br>
                    <input type="radio" name="ethics">Yes
                    <br>
                    <input type="radio" name="ethics">No
                    <br>
                    <input type="radio" name="ethics">blank
                    <br>
                </label>
                <label class="full-width">
                    Cycles
                    <input>
                </label>
                <label class="full-width">
                    Supervisor
                    <input>
                </label>
                <label class="full-width">
                    Activity Start Date
                    <i class="fa fa-calendar"></i>
                    <input type="date">
                </label>
                <label class="full-width">
                    Activity End Date
                    <i class="fa fa-calendar"></i>
                    <input type="date">
                </label>
                <label class="full-width">
                    Max number of students
                    <i class="fa fa-group"></i>
                    <input type="number">
                </label>
                <label class="full-width">
                    Min number of students
                    <i class="fa fa-group"></i>
                    <input type="number">
                </label>
                <label class="full-width">
                    Estimate hours
                    <i class="fa fa-clock-o"></i>
                    <input type="number">
                </label>
                <label class="full-width">
                    Site
                    <br>
                    <input type="checkbox" name="site">VFMP
                    <br>
                    <input type="checkbox" name="site">IMP
                    <br>
                    <input type="checkbox" name="site">SMP
                    <br>
                    <input type="checkbox" name="site">VFMP
                    <br>
                </label>
                <label class="full-width">
                    Status
                    <br>
                    <input type="checkbox" name="status">Proposed
                    <br>
                    <input type="checkbox" name="status">Active
                    <br>
                    <input type="checkbox" name="status">Revised
                    <br>
                </label>


            </div>
        </transition>
        <div class="main">
            <table>
                <thead>
                    <tr>
                        <th v-if="permission(column)" v-show="column.show" v-for="column in columns" v-html="column.title"></th>
                    </tr>
                </thead>
                <tbody>
                    <tr v-for="row in rows">
                        <td v-for="(item, index) in row" :key="index">
                            <div class="info-container" v-html="item" @click="expand(this)">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <script>
        var app = new Vue({
            el: "#app",
            data: {
                advancedSearch: false,
                columns: [
                    {
                        title: "Activity ID",
                        permission: "all",
                        show: true
                    },
                    {
                        title: "Activity Title",
                        permission: "all",
                        show: true
                    },
                    {
                        title: "Ethics Board approval required?",
                        permission: "all",
                        show: true
                    },
                    {
                        title: "Primary Supervisor Name",
                        permission: "all",
                        show: true
                    },
                    {
                        title: "Primary Supervisor Email",
                        permission: "admin",
                        show: true
                    },
                    {
                        title: "Course Fees",
                        permission: "all",
                        show: false
                    },
                    {
                        title: "Activity Category",
                        permission: "all",
                        show: false
                    },
                    {
                        title: "Activity Interactions",
                        permission: "all",
                        show: false
                    },
                    {
                        title: "Please indicate if the activity will require travel?",
                        permission: "all",
                        show: false
                    },
                    {
                        title: "Information regarding primary location of activity",
                        permission: "all",
                        show: false
                    },
                    {
                        title: "Location Details (if activity requires travel)",
                        permission: "all",
                        show: false
                    },
                    {
                        title: "Activity Start Date",
                        permission: "all",
                        show: true
                    },
                    {
                        title: "Activity End Date",
                        permission: "all",
                        show: true
                    },
                    {
                        title: "Cycle available <a href='#link-to-documentation'><i class='fa fa-question-circle'></i></a>",
                        permission: "all",
                        show: true
                    },
                    {
                        title: "Seats available",
                        permission: "all",
                        show: true
                    },
                    {
                        title: "Cycles",
                        permission: "all",
                        show: true
                    },
                    {
                        title: "Max # sudents",
                        permission: "all",
                        show: true
                    },
                    {
                        title: "Min # students",
                        permission: "all",
                        show: true
                    },
                    {
                        title: "Est # hours",
                        permission: "all",
                        show: true
                    },
                    {
                        title: "Site",
                        permission: "all",
                        show: true
                    },
                    {
                        title: "Status",
                        permission: "all",
                        show: true
                    },
                    {
                        title: "Active",
                        permission: "all",
                        show: true
                    },
                    {
                        title: "",
                        permission: "all",
                        show: true
                    }
                ],
                rows: [{
                    id: "00452",
                    title: "<a href='#item'>Review of outcomes using two &beta;-hCG-based protocols for triaging follow-up and management of PUL</a>",
                    ethics: "",
                    supervisor: "Tom",
                    email: "tom@email.com",
                    start: "Sep 2 2018",
                    end: "Aug 25 2019",
                    cycles: "5",
                    seatsAvailable: "1",
                    maxStudent: "1",
                    minStudent: "1",
                    estHours: "3",
                    site: "VFMP",
                    status: "proposed",
                    active: "no",
                    controls: `<button class='fa fa-info-circle' title='full details'></button>
                    <button class='fa fa-edit' title='edit'></button>
                    <button class='fa fa-repeat' title='roll over'></button>`,
                },],
                currentRole: "admin",
                userTypes:
                    {
                        admin: {
                            all: true,
                            admin: true
                        },
                        student: {
                            all: true,
                            student: true
                        }
                    }
            },
            methods: {
                permission: function (source) {
                    accessNeeded = source.permission;
                    currentAccess = this.$data.currentRole;
                    return this.$data.userTypes[currentAccess][accessNeeded]
                },
                expand: function (e) {
                    console.log(e);
                }
            },
        });
    </script>
    <style>
        .advanced-search {
            overflow: hidden;
        }

        .fade-enter-active,
        .fade-leave-active {
            transition: height .3s;
        }

        .fade-enter-active {
            height: 550px;
        }

        .fade-enter,
        .fade-leave-active {
            height: 0;
        }

        .fade-leave {
            height: 550px;
        }

        * {
            box-sizing: border-box;
            font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif
        }

        header {
            text-transform: capitalize;
        }

        header h1 {
            float: left;
            margin: 0;
        }

        header h2 {
            border-bottom: 1px solid #ccc;
            line-height: 35px;
            margin-bottom: 1em;
            text-align: right;
        }

        table {
            border: 1px solid;
        }

        th,
        td {
            border: 1px solid;
            padding: 5px;
            text-align: center;
        }

        td button {
            margin: 5px 0;
            height: 40px;
            width: 40px;
        }

        tbody tr:nth-child(odd) {
            background: #eee;
        }

        .full-width {
            width: 100%;
            display: block;
            margin: 15px 0;
        }

        #app {
            width: 1400px;
            margin: 0 auto;
        }

        .sidebar {
            float: left;
            /* width: 23.404255319148934%; */
        }

        .sidebar i {
            float: right;
            font-size: 1.5em;
            margin-top: -10px;
            margin-right: 17px;
        }

        .sidebar input {
            width: 100%
        }

        .sidebar input[type='checkbox'],
        .sidebar input[type='radio'] {
            width: auto;
        }

        .main {
            float: left;
            /* margin-left: 2.127659574468085%; */
            /* width: 74.46808510638297%; */
            overflow: auto;
        }
    </style>
</body>

</html>